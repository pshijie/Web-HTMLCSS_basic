<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>00_引入</title>
</head>

<body>

  <button>测试1</button>
  <button>测试2</button>
  <button>测试3</button>
  <!--
需求: 点击某个按钮, 提示"点击的是第n个按钮"
-->
  <script type="text/javascript">
    var btns = document.getElementsByTagName('button')
    //遍历加监听
    // btns是一个伪数组，btns.length需要不断计算，可以提前保存，加快执行效率
    /*     for (var i = 0, length = btns.length; i < length; i++) {  // 注意：这个i是全局变量，因为不是定义在函数内部的
          var btn = btns[i]
          btn.onclick = function () {
            // 无论点哪个按钮都是输出"第4个按钮"，因为点击事件是for循环执行完后面才执行的，for循环只不过绑定了点击事件而已
            // 此时i=3
            alert('第' + (i + 1) + '个按钮')
          }
        } */
    /*     for (var i = 0, length = btns.length; i < length; i++) {
          var btn = btns[i]
          btn.index = i // 解决办法：将btn对应的下标保存在btn上
          btn.onclick = function () {
            alert('第' + (this.index + 1) + '个按钮')
          }
        } */

    // 利用闭包
    for (var i = 0, length = btns.length; i < length; i++) {
      (function (i) {  // 这个i属于该函数的外部的变量，所以使用到了闭包
        var btn = btns[i]
        btn.index = i
        btn.onclick = function () {
          alert('第' + (this.index + 1) + '个按钮')
        }
      })(i)  // 这个i是for循环的i
    }

  </script>
</body>

</html>